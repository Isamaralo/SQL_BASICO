/* TRIGGERS */

/*CREATE OR REPLACE TRIGGER tigre_1_empleados
AFTER INSERT OR UPDATE OF salary ON employees
FOR EACH ROW
BEGIN
DBMS_OUTPUT.PUT_LINE ('Salario ' ||:NEW.salary|| ' Salario antiguo ' ||:OLD.salary);
END;*/
--SET SERVEROUTPUT ON; 
UPDATE EMPLOYEES SET SALARY = SALARY + (SALARY*0.2) WHERE DEPARTMENT_ID = :dpto;




--CREATE TABLE INCREMENTOS_SALARIO (INCREMENTOS_ID INT NOT NULL, EMPLOYEE_ID INT, SALARIO_ANTERIOR INT, SALARIO_POSTERIOR INT, FECHA DATE, PRIMARY KEY(INCREMENTOS_ID), FOREIGN KEY(EMPLOYEE_ID) REFERENCES EMPLOYEES(EMPLOYEE_ID));

--DROP TABLE INCREMENTOS_SALARIO;

/*CREATE OR REPLACE TRIGGER tigre_1_empleados
AFTER INSERT OR UPDATE OF salary ON employees
FOR EACH ROW
BEGIN
INSERT INTO INCREMENTOS_SALARIO VALUES (2, :OLD.employee_id, :OLD.salary, :NEW.salary, SYSDATE);
END;*/

UPDATE EMPLOYEES SET SALARY = SALARY + (SALARY*0.2) WHERE DEPARTMENT_ID = :dpto;